<div class="p-4">
  <div class="flex items-center">
    <mat-icon class="mr-2">crisis_alert</mat-icon>
    <h1 class="mat-headline m-0">Similarities</h1>
    <span class="grow"></span>
    <div class="example-action-buttons">
      <button mat-button (click)="accordion.openAll()">Expand All</button>
      <button mat-button (click)="accordion.closeAll()">Collapse All</button>
    </div>
  </div>

  <mat-accordion multi>
    <ng-container *ngFor="let similarity of task?.similarityCache.values | async">
      <h1 class="mat-headline"></h1>
      <mat-expansion-panel
        *ngFor="let part of similarity.parts"
        hideToggle
        (opened)="panelOpenState = true"
        (closed)="panelOpenState = false"
      >
        <mat-expansion-panel-header>
          <mat-panel-title>{{ similarity.friendlyTypeName }} </mat-panel-title>
          <mat-panel-description> {{ part.description }} </mat-panel-description>
        </mat-expansion-panel-header>
        <f-file-viewer
          *ngIf="panelOpenState"
          [fileType]="part.format"
          [src]="similarity.fileUrl(part.idx)"
        ></f-file-viewer>
      </mat-expansion-panel>
    </ng-container>
  </mat-accordion>
</div>
